---
import Layout from "../../layouts/Layout.astro";
import "../../styles/oferta.css";
import {
  getCountryCode,
  getCurrentLanguageTranslation,
} from "../../utils/utils";
import truck1 from "../../assets/images/bus.png";
import truck2 from "../../assets/images/solo.png";
import truck3 from "../../assets/images/platforma.png";
import truck5 from "../../assets/images/standard-1.png";
import truck8 from "../../assets/images/zestaw.png";
import truck9 from "../../assets/images/wywrotka.png";
import mapPl from "../../assets/images/map_pl.webp";
import mapEng from "../../assets/images/map_eng.webp";
import mapDe from "../../assets/images/map_de.webp";
import Image from "astro/components/Image.astro";

const lang = getCountryCode(Astro.url.pathname);
const translations = await getCurrentLanguageTranslation(lang);
const offer = translations?.offer ?? {
  title: "",
  items: [] as { lead: string; text?: string }[],
};
const items = offer?.items ?? ([] as { lead: string; text?: string }[]);
const mid = Math.ceil(items.length / 2);
const group1 = items.slice(0, mid);
const group2 = items.slice(mid);

const truckAltMap = {
  en: "Truck",
  de: "Lastwagen",
  pl: "Ciężarówka",
} as const;

const mapImage = {
  en: mapEng,
  de: mapDe,
  pl: mapPl,
} as const;

const mapAlt = {
  en: "Map of deliveries",
  de: "Karte der Lieferungen",
  pl: "Mapa dostaw",
} as const;
---

<Layout
  contactBtn={translations.contactBtn}
  contact={translations.contact}
  links={translations.nav.links}
  footer={translations.footer}
  title={offer?.title ?? "Oferta"}
  description={offer?.title ?? "Oferta"}
>
  <section id="why-choose-1662">
    <div class="cs-container">
      <div class="cs-content">
        <h2 class="cs-title">{offer?.title ?? ""}</h2>
      </div>
      <div class="cs-wrapper">
        <ul class="cs-card-group">
          {
            group1.map((item) => (
              <li class="cs-item">
                <span class="cs-item-number">-</span>
                <div class="cs-item-wrapper">
                  <p class="cs-item-text">
                    <strong class="cs-item-lead">{item.lead}</strong>
                    {item.text ? ` ${item.text}` : ""}
                  </p>
                </div>
              </li>
            ))
          }
        </ul>
        <ul class="cs-card-group">
          {
            group2.map((item) => (
              <li class="cs-item">
                <span class="cs-item-number">-</span>
                <div class="cs-item-wrapper">
                  <p class="cs-item-text">
                    <strong class="cs-item-lead">{item.lead}</strong>
                    {item.text ? ` ${item.text}` : ""}
                  </p>
                </div>
              </li>
            ))
          }
        </ul>
      </div>
    </div>
    <br />
    <br />
    <br />
    <div class="cs-container">
      <div class="cs-content">
        <h2 class="cs-title">Dostępne formy transportu</h2>
      </div>
    </div>
    <br />
    <section id="timetable-1731">
      <div class="cs-container">
        <div class="cs-table-list">
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Bus</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck1}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 4,2 – 4,8m x 2,1 – 2,4m x 2,2 – 2,6m</li>
                    <li>Ładowność: do 1,2t</li>
                    <li> Możliwość załadunku: tyłem, bokiem, górą</li>
                    <li>Ilość palet: 8-10 euro palet 120x80</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Pojazd typu SOLO</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck2}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 6,2 – 9,3m x 2,45m x 2,5 – 3m</li>
                    <li>Ładowność: 3-12t</li>
                    <li>Możliwość załadunku: tyłem, bokiem, górą</li>
                    <li>Ilość palet: 15 (120 x 80), 16 (120 x 80), 18 (120 x 80), 23 (120 x 80)</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Naczepa typu STANDRAD</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck3}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 13,6 x 2,45 x 2,6 – 2,85m</li>
                    <li>Ładowność: 24,5t</li>
                    <li>Kubatura: 88-94m<sup>3</sup></li>
                    <li>Możliwość załadunku: bokiem, tyłem, górą</li>
                    <li>Ilość palet: 33-34 euro palety 120x80</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>

          <table class="cs-table">
            <thead>
            <tr>
              <th scope="col" colspan="2">Niskopodwozie</th>
            </tr>
            </thead>
            <tbody>
            <tr class="cs-table-row">
              <td colspan="2">
                <Image
                  class="truck"
                  width="410"
                  height="150"
                  src={truck3}
                  alt={truckAltMap[lang]}
                />
              </td>
              <td class="cs-table-cell">
                <ul>
                  <li>Wymiary: 12 – 18,2m x 2,55 – 3,2m x WYS. do 4m</li>
                  <li>Ładowność: 24 – 60t</li>
                  <li>Możliwość załadunku: bokiem, tyłem, górą</li>
                </ul>
              </td>
            </tr>
            </tbody>
          </table>

          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Zestaw przestrzenny TANDEM</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck8}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 7,7 x 2,45m (solówka) + 7,7 x 2,45m (przyczepa) lub 6,8 x 2,45m (solówka) + 8,3 x</li>
                    <li>2,45m (przyczepa)</li>
                    <li>WYS. 2,65 - 3,0m </li>
                    <li>Ładowność: 5-24t,</li>
                    <li>Kubatura: 120m<sup>3</sup></li>
                    <li>Możliwość załadunku: bokiem, tyłem, górą</li>
                    <li>Ilość palet: 38 euro palety 120x80</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Naczepa typu CHŁODNIA</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck5}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 13,6 x 2,45 x 2,6 – 2,75m</li>
                    <li>Ładowność: 20-22t</li>
                    <li>Długość przestrzeni ładunkowej: 7,75 m</li>
                    <li>Kubatura: 86-88m<sup>3</sup></li>
                    <li>Możliwość załadunku: tyłem.</li>
                    <li>Ilość palet: 33 euro palety 120x80</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Naczepa typu IZOTERMA</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck5}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 13,6 x 2,45 x 2,6 – 2,75m</li>
                    <li>Ładowność: 20-22t</li>
                    <li>Kubatura: 86-88m<sup>3</sup></li>
                    <li>Kubatura: 51 m<sup>3</sup></li>
                    <li>Możliwość załadunku: tyłem</li>
                    <li>Ilość palet: 33 euro palety 120x80</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Naczepa typu MEGA</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck5}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 13,6 x 2,45 – 2,48  x 2,9 – 3m</li>
                    <li>Ładowność: 24,5t</li>
                    <li>Kubatura: 98-101m<sup>3</sup></li>
                    <li>Możliwość załadunku: bokiem, tyłem, górą</li>
                    <li>Ilość palet: 33-34 euro palety 120x80</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
              <tr>
                <th scope="col" colspan="2">Naczepa typu PLATFORMA</th>
              </tr>
            </thead>
            <tbody>
              <tr class="cs-table-row">
                <td colspan="2">
                  <Image
                    class="truck"
                    width="410"
                    height="150"
                    src={truck3}
                    alt={truckAltMap[lang]}
                  />
                </td>
                <td class="cs-table-cell">
                  <ul>
                    <li>Wymiary: 13,6m x SZER. do 2,5m x WYS. do 3,1m </li>
                    <li>Ładowność: 24,5t</li>
                    <li>Możliwość załadunku: bokiem, tyłem, górą</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="cs-table">
            <thead>
            <tr>
              <th scope="col" colspan="2">Wywrotka</th>
            </tr>
            </thead>
            <tbody>
            <tr class="cs-table-row">
              <td colspan="2">
                <Image
                  class="truck"
                  width="410"
                  height="150"
                  src={truck9}
                  alt={truckAltMap[lang]}
                />
              </td>
              <td class="cs-table-cell">
                <ul>
                  <li>Ładowność: 24t </li>
                  <li>Kubatura: 24-55 m<sup>3</sup></li>
                  <li>Możliwość załadunku: górą</li>
                </ul>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    <br />
    <br />
    <br />
    <div class="cs-container">
      <div class="cs-content">
        <h2 class="cs-title">Zasięg usług</h2>
      </div>
    </div>
    <br />
    <figure class="map-figure">
      <button
        type="button"
        class="map-open"
        aria-haspopup="dialog"
        aria-controls="map-dialog"
        aria-label="Otwórz mapę na pełnym ekranie"
      >
        <Image
          class="map"
          width="1900"
          height="1322"
          src={mapImage[lang]}
          alt={mapAlt[lang]}
        />
        <span class="sr-only">Otwórz mapę na pełnym ekranie</span>
      </button>
      <figcaption class="sr-only">Mapa zasięgu usług</figcaption>
    </figure>
    <dialog id="map-dialog" class="map-dialog" aria-label="Mapa">
      <div class="map-dialog__content">
        <button type="button" class="map-dialog__close" aria-label="Zamknij">Zamknij</button>
        <Image
          class="map-dialog__img"
          width="1900"
          height="1322"
          src={mapImage[lang]}
          alt={mapAlt[lang]}
        />
      </div>
    </dialog>
    <script is:inline>
      (function () {
        const btn = document.querySelector('.map-open');
        const dlg = document.getElementById('map-dialog');
        const closeBtn = dlg?.querySelector('.map-dialog__close');
        if (!btn || !dlg || !closeBtn) return;
        btn.addEventListener('click', () => dlg.showModal());
        closeBtn.addEventListener('click', () => dlg.close());
        dlg.addEventListener('click', (e) => { if (e.target === dlg) dlg.close(); });
        dlg.addEventListener('keydown', (e) => { if (e.key === 'Escape') dlg.close(); });
      })();
    </script>
  </section>
</Layout>

---
import type { CollectionEntry } from "astro:content";
import "./policy.css";

export type PolicyEntry =
  CollectionEntry<"privacyPolicyAndTermsOfUse">["data"]["policy"];

interface Props {
  policy: PolicyEntry | undefined;
}

const { policy } = Astro.props;

const pathname = Astro.url.pathname || "/";
const lang = pathname.startsWith("/en")
  ? "en"
  : pathname.startsWith("/de")
  ? "de"
  : "pl";

const headings = {
  pl: {
    scopeIntro: "Zakres przetwarzanych danych obejmuje:",
    legalBasis: "Podstawa prawna przetwarzania danych",
    dataRetention: "Okres przechowywania danych",
    userRights: "Prawa Użytkowników",
    userRightsIntro: "Użytkownik ma prawo do:",
    dataSharing: "Udostępnianie danych",
    security: "Bezpieczeństwo strony",
    disclaimers: "Wyłączenie odpowiedzialności",
    policyChanges: "Zmiany w Polityce Prywatności",
    contact: "Kontakt",
    contactIntro:
      "Jeśli mają Państwo pytania dotyczące naszej strony internetowej, prosimy o kontakt:",
    companyDetailsLink: "Ogólnopolska Wyszukiwarka Gospodarcza",
    retentionIntro: "Dane osobowe przechowujemy przez okres:",
    emailLabel: "E-mail",
    phoneLabel: "Telefon",
    companyDetailsLabel: "Dane firmy",
  },
  en: {
    scopeIntro: "The scope of processed data includes:",
    legalBasis: "Legal basis for data processing",
    dataRetention: "Data retention period",
    userRights: "User rights",
    userRightsIntro: "You have the right to:",
    dataSharing: "Data sharing",
    security: "Website security",
    disclaimers: "Disclaimer",
    policyChanges: "Changes to this Privacy Policy",
    contact: "Contact",
    contactIntro:
      "If you have any questions regarding our website, please contact us:",
    companyDetailsLink: "National Business Registry (Poland)",
    retentionIntro: "We retain personal data for:",
    emailLabel: "Email",
    phoneLabel: "Phone",
    companyDetailsLabel: "Company details",
  },
  de: {
    scopeIntro: "Der Umfang der verarbeiteten Daten umfasst:",
    legalBasis: "Rechtsgrundlage der Datenverarbeitung",
    dataRetention: "Speicherdauer der Daten",
    userRights: "Rechte der Nutzer",
    userRightsIntro: "Sie haben das Recht auf:",
    dataSharing: "Weitergabe von Daten",
    security: "Sicherheit der Website",
    disclaimers: "Haftungsausschluss",
    policyChanges: "Änderungen dieser Datenschutzrichtlinie",
    contact: "Kontakt",
    contactIntro:
      "Wenn Sie Fragen zu unserer Website haben, kontaktieren Sie uns bitte:",
    companyDetailsLink: "Zentrales Unternehmensregister (Polen)",
    retentionIntro: "Wir speichern personenbezogene Daten für:",
    emailLabel: "E-Mail",
    phoneLabel: "Telefon",
    companyDetailsLabel: "Firmendaten",
  },
}[lang as "pl" | "en" | "de"];
---

<section class="cs-container">
  <h1>{policy?.title}</h1>
  <p>
    {policy?.description}
  </p>
  <h2>1. {policy?.administrator?.label}</h2>
  <p>
    {policy?.administrator?.content}
  </p>
  <h2>2. {policy?.dataProcessing?.purpose}</h2>
  <p>
    {headings.scopeIntro}
  </p>
  <ul>
    {policy?.dataProcessing?.scope?.map((item) => <li>{item}</li>)}
  </ul>
  <ul>
    {policy?.dataProcessing?.cookies?.map((cookie) => <li>{cookie}</li>)}
  </ul>
  <h2>3. {headings.legalBasis}</h2>
  <p>
    {policy?.legalBasis?.description} ({policy?.legalBasis?.regulation}).
  </p>
  <h2>4. {headings.dataRetention}</h2>
  <p>
    {headings.retentionIntro} {policy?.dataRetention?.period}.
    {policy?.dataRetention?.policy}
  </p>
  <h2>5. {headings.userRights}</h2>
  <p>{headings.userRightsIntro}</p>
  <ul>
    {policy?.userRights?.map((rights) => <li>{rights}</li>)}
  </ul>
  <h2>6. {headings.dataSharing}</h2>
  <p>
    {policy?.dataSharing?.policy}
  </p>
  <h2>7. {headings.security}</h2>
  <p>
    {policy?.security?.policy}
  </p>
  <h2>8. {headings.disclaimers}</h2>
  <p>
    {policy?.disclaimers?.content}
  </p>
  <p>
    {policy?.disclaimers?.externalLinks}
  </p>
  <p>
    {policy?.disclaimers?.damages}
  </p>
  <h2>9. {headings.policyChanges}</h2>
  <p>
    {policy?.policyChanges?.policy}{policy?.policyChanges?.notice}
  </p>
  <h2>10. {headings.contact}</h2>
  <p>
    {headings.contactIntro}
  </p>
  <ul>
    <li>
      {headings.emailLabel}: <a href=`mailto:${policy?.contact?.email}`
        >{policy?.contact?.email}</a
      >
    </li>
    <li>
      {headings.phoneLabel}: <a href=`tel:${policy?.contact?.phone}`
        >{policy?.contact?.phone}</a
      >
    </li>
    <li>
      {headings.companyDetailsLabel}: <a
        href=`${policy?.contact?.companyDetails}`
        target="_blank"
        rel="noopener noreferrer">{headings.companyDetailsLink}</a
      >
    </li>
  </ul>
</section>
